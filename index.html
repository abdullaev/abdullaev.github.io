<html>

<head></head>

<body>
    <iframe
        src="https://yandex.ru/business/partner-widget/test/301?inFrame=true&partnerSiteName=http%3A%2F%2Fweareanimals.ru&products%5B0%5D=subscription&products%5B1%5D=websubscription&appearance=wizard"
        width="100%" height="2000">
    </iframe>

    <script>
        function isInIframe() {
            try {
                return window.self !== window.top;
            } catch (e) {
                return true;
            }
        }

        window.addEventListener('message', (event) => {
            if (event.origin !== 'https://yandex.ru') {
                return;
            }


            try {
                const message = JSON.parse(event.data);

                if (message.messageId !== 'YA_PARTNER_FRAME_NAVIGATION') {
                    return;
                }

                if (isInIframe()) {
                    window.top.postMessage(event.data, '*');
                    return;
                }

                window.location.href = message.data.url.replace('__CURRENT_LOCATION__', window.location.href);
            } catch (e) { }
        });
    </script>
</body>

</html>